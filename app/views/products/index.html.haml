.products
  - 1.upto 3 do |shelf_index|
    .products__shelf.flex
      - @products.each.with_index(1) do |product, product_index|
        - if product_index.between?(shelf_index * 3 - 2, shelf_index * 3)
          = link_to product_path(product) do
            -# = image_tag product.image # Active Storage
            = image_tag product.images.first.src.url if product.images.present?
            
  = paginate(@products)
  - if paginate(@products).blank?
    .blank